{"version":3,"sources":["pages/home/Home.module.css","components/Navbar.module.css","pages/login/Login.module.css","pages/signup/Signup.module.css","firebase/config.js","context/AuthContext.js","hooks/useAuthContext.js","components/Navbar.js","hooks/useLogout.js","hooks/useFirestore.js","pages/home/TransactionForm.js","pages/home/TransactionList.js","pages/home/Home.js","hooks/useCollection.js","hooks/useLogin.js","pages/login/Login.js","hooks/useSignup.js","pages/signup/Signup.js","App.js","index.js"],"names":["module","exports","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","projectFirestore","firestore","projectAuth","auth","timestamp","Timestamp","AuthContext","createContext","authReducer","state","action","type","user","payload","authIsReady","AuthContextProvider","children","useReducer","dispatch","useEffect","unsub","onAuthStateChanged","console","log","Provider","value","useAuthContext","context","useContext","Error","Navbar","logout","useState","isCancelled","setIsCancelled","error","setError","isPending","setIsPending","a","signOut","message","useLogout","className","styles","navbar","title","to","displayName","onClick","initialState","document","success","firestoreReducer","useFirestore","collection","response","ref","dispatchIfNotCancelled","addDocument","doc","createdAt","fromDate","Date","add","addedDocument","deleteDocument","id","delete","TransactionForm","uid","name","setName","amount","setAmount","onSubmit","e","preventDefault","required","onChange","target","TransactionList","transactions","map","transaction","Home","_query","_orderBy","documents","setDocuments","query","useRef","current","orderBy","where","unsubsribe","onSnapshot","snapshot","results","docs","forEach","push","data","useCollection","container","content","sidebar","Login","login","email","password","signInWithEmailAndPassword","res","useLogin","setEmail","setPassword","disabled","Signup","username","setUsername","signup","createUserWithEmailAndPassword","updateProfile","useSignup","App","exact","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.19e6a2b2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Home_container__3bftD\",\"content\":\"Home_content__18qU0\",\"sidebar\":\"Home_sidebar__21xz5\",\"transactions\":\"Home_transactions__3_tqr\",\"name\":\"Home_name__4a_Tj\",\"amount\":\"Home_amount__1MW_9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbar\":\"Navbar_navbar__31-FB\",\"title\":\"Navbar_title__2CGsW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login-form\":\"Login_login-form__1NBYb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"signup-form\":\"Signup_signup-form__3B7tC\"};","import firebase from \"firebase\";\nimport 'firebase/firestore';\nimport 'firebase/auth';\n\n\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyBgEbMSWMKo1kzi0V2I_0_TOY-2kJUxltI\",\n    authDomain: \"mymoney-5b803.firebaseapp.com\",\n    projectId: \"mymoney-5b803\",\n    storageBucket: \"mymoney-5b803.appspot.com\",\n    messagingSenderId: \"64284669437\",\n    appId: \"1:64284669437:web:9791ae643b42e1643b1594\"\n};\n\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\n// init service \nconst projectFirestore = firebase.firestore();\nconst projectAuth = firebase.auth();\n\n// timestamp\nconst timestamp = firebase.firestore.Timestamp;\n\nexport { projectFirestore, projectAuth, timestamp };","import { createContext, useReducer, useEffect } from \"react\";\nimport { projectAuth } from \"../firebase/config\";\n\nexport const AuthContext = createContext();\n\nexport const authReducer = (state, action) => {\n    switch (action.type) {\n        case 'LOGIN':\n            return { ...state, user: action.payload }\n        case 'LOGOUT':\n            return { ...state, user: null }\n        case 'AUTH_IS_READY':\n            return { ...state, user: action.payload, authIsReady: true }\n        default:\n            return state;\n    }\n}\n\nexport const AuthContextProvider = ({ children }) => {\n\n    const [state, dispatch] = useReducer(authReducer, {\n        user: null,\n        authIsReady: false\n    })\n\n    useEffect(() => {\n        const unsub = projectAuth.onAuthStateChanged((user) => {\n            dispatch({ type: 'AUTH_IS_READY', payload: user })\n            unsub()\n        })\n    }, [])\n\n    console.log('Authcontext state: ', state)\n\n    return (\n        <AuthContext.Provider value={{ ...state, dispatch }}>\n            {children}\n        </AuthContext.Provider>\n    )\n}","import { AuthContext } from \"../context/AuthContext\";\nimport { useContext } from \"react\";\n\nexport const useAuthContext = () => {\n    const context = useContext(AuthContext);\n\n    if (!context) {\n        throw Error('useAuthContext must be inside an AuthContextProvider')\n    }\n    return context;\n}","import styles from './Navbar.module.css'\nimport { useLogout } from '../hooks/useLogout'\nimport { useAuthContext } from '../hooks/useAuthContext'\n\nimport React from 'react'\nimport { Link } from 'react-router-dom'\n\nexport default function Navbar() {\n\n    const { logout } = useLogout();\n    const { user } = useAuthContext();\n\n    return (\n        <nav className={styles.navbar}>\n            <ul>\n                <li className={styles.title}><Link to='/'>myMoney</Link></li>\n                {!user && (\n                    <>\n                        <li><Link to='/login'>Login</Link></li>\n                        <li><Link to='/signup'>Signup</Link></li>\n                    </>\n                )}\n\n                {user && (\n                    <>\n                        <li>hello, {user.displayName}</li>\n                        <li><button className='btn' onClick={logout}>Logout</button></li>\n                    </>)}\n            </ul>\n\n        </nav>\n\n\n    )\n}\n","import { useState, useEffect } from \"react\";\nimport { projectAuth } from \"../firebase/config\";\nimport { useAuthContext } from \"./useAuthContext\";\n\nexport const useLogout = () => {\n    const [isCancelled, setIsCancelled] = useState(false);\n    const [error, setError] = useState(null);\n    const [isPending, setIsPending] = useState(false);\n    const { dispatch } = useAuthContext();\n\n    const logout = async () => {\n        setError(null)\n        setIsPending(true)\n\n        // sign the user out\n\n        try {\n            await projectAuth.signOut()\n\n            // dispatch logout action (just skip the payload as user is now null)\n            dispatch({ type: 'LOGOUT' })\n\n            // update state\n            if (!isCancelled) {\n                setIsPending(false);\n                setError(false);\n            }\n        }\n        catch (err) {\n            if (!isCancelled) {\n                console.log(err.message)\n                setError(err.message)\n                setIsPending(false)\n            }\n        }\n    }\n\n    // cleanup function stops async state change when component unmounts\n    useEffect(() => {\n        return () => setIsCancelled(true)\n    }, [])\n\n    return { logout, error, isPending }\n}\n\n","import { useReducer, useEffect, useState } from 'react'\nimport { projectFirestore, timestamp } from '../firebase/config'\n\nlet initialState = {\n    document: null,\n    isPending: false,\n    error: null,\n    success: null\n}\n\nconst firestoreReducer = (state, action) => {\n\n    switch (action.type) {\n        case 'IS_PENDING':\n            return {\n                isPending: true,\n                document: null,\n                success: false,\n                error: null\n            }\n        case 'ADDED_DOCUMENT':\n            return {\n                isPending: false,\n                document: action.payload,\n                success: true,\n                error: null\n            }\n        case 'ERROR':\n            return {\n                isPending: false,\n                document: null,\n                success: false,\n                error: action.payload\n            }\n        case 'DELETED_DOCUMENT':\n            return {\n                isPending: false,\n                document: null,\n                success: false,\n                error: null\n            }\n        default:\n            return state;\n    }\n}\n\nexport const useFirestore = (collection) => {\n\n    const [response, dispatch] = useReducer(firestoreReducer, initialState);\n    const [isCancelled, setIsCancelled] = useState(false);\n\n    // collection ref\n    const ref = projectFirestore.collection(collection);\n\n    // only dispatch if not cancelled\n    const dispatchIfNotCancelled = (action) => {\n        if (!isCancelled) {\n            dispatch(action)\n        }\n    }\n\n    // add document\n    const addDocument = async (doc) => {\n        dispatch({ type: 'IS_PENDING' })\n\n        try {\n            const createdAt = timestamp.fromDate(new Date())\n            const addedDocument = await ref.add({ ...doc, createdAt: createdAt });\n            dispatchIfNotCancelled({ type: 'ADDED_DOCUMENT', payload: addedDocument })\n        }\n        catch (err) {\n            dispatchIfNotCancelled({ type: 'ERROR', payload: err.message })\n        }\n    }\n\n    // delete document\n    const deleteDocument = async (id) => {\n        dispatch({ type: 'IS_PENDING' })\n\n        try {\n            await ref.doc(id).delete()\n            dispatchIfNotCancelled({ type: 'DELETED_DOCUMENT' })\n        }\n        catch (err) {\n            dispatchIfNotCancelled({ type: 'ERROR', payload: 'could not delete' })\n        }\n    }\n\n    // cleanup function\n    useEffect(() => {\n        return () => setIsCancelled(true);\n    }, [])\n\n    return { addDocument, deleteDocument, response }\n}\n","import React, { useState, useEffect } from 'react'\nimport { useFirestore } from '../../hooks/useFirestore'\n\n\nexport default function TransactionForm({ uid }) {\n\n    const [name, setName] = useState('')\n    const [amount, setAmount] = useState('')\n    const { addDocument, response } = useFirestore('transactions');\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        addDocument({\n            uid: uid,\n            name,\n            amount\n        }\n        )\n    }\n\n    // clear form if adddocument is succesful\n    useEffect(() => {\n        if (response.success) {\n            setName('');\n            setAmount('');\n        }\n    }, [response.success])\n\n    return (\n        <>\n            <h3>Add a Transaction</h3>\n            <form onSubmit={handleSubmit}>\n                <label>\n                    <span>Transaction name:</span>\n                    <input\n                        type=\"text\"\n                        required\n                        onChange={(e) => setName(e.target.value)}\n                        value={name}\n                    />\n                </label>\n                <label>\n                    <span>Amount ($):</span>\n                    <input\n                        type=\"number\"\n                        required\n                        onChange={(e) => setAmount(e.target.value)}\n                        value={amount}\n                    />\n                </label>\n                <button>Add transaction</button>\n            </form>\n        </>\n    )\n}\n","import { useFirestore } from '../../hooks/useFirestore'\n\n// styles\nimport styles from './Home.module.css'\n\nexport default function TransactionList({ transactions }) {\n\n    const { deleteDocument, response } = useFirestore('transactions')\n    console.log(response)\n\n    return (\n        <ul className={styles.transactions}>\n            {transactions.map((transaction) => (\n\n                <li key={transaction.id}>\n                    <p className={styles.name}>{transaction.name}</p>\n                    <p className={styles.amount}>${transaction.amount}</p>\n                    <button onClick={() => deleteDocument(transaction.id)}>x</button>\n                </li>\n            ))}\n        </ul>\n    )\n}\n","// styles\nimport { useAuthContext } from '../../hooks/useAuthContext'\nimport { useCollection } from '../../hooks/useCollection';\nimport styles from './Home.module.css'\n\n//components\nimport TransactionForm from './TransactionForm'\nimport TransactionList from './TransactionList';\n\nexport default function Home() {\n\n    const { user } = useAuthContext();\n    const { documents, error } = useCollection(\n        'transactions',\n        [\"uid\", \"==\", user.uid],\n        ['createdAt', \"desc\"]);\n\n\n\n    return (\n        <div className={styles.container}>\n            <div className={styles.content}>\n                {error && <p>{error}</p>}\n                {documents && <TransactionList transactions={documents} />}\n            </div>\n            <div className={styles.sidebar}>\n                <TransactionForm uid={user.uid} />\n            </div>\n        </div>\n    )\n}\n\n","import { useEffect, useState, useRef } from 'react'\nimport { projectFirestore } from '../firebase/config'\n\nexport const useCollection = (collection, _query, _orderBy) => {\n    const [documents, setDocuments] = useState(null)\n    const [error, setError] = useState(null)\n\n    // if we dont use a ref --> infinite loop in useeffect\n    // _query is an array and is 'different' on every function call\n    const query = useRef(_query).current;\n    const orderBy = useRef(_orderBy).current;\n\n    useEffect(() => {\n        let ref = projectFirestore.collection(collection);\n\n        if (query) {\n            ref = ref.where(...query);\n        }\n\n        if (orderBy) {\n            ref = ref.orderBy(...orderBy);\n        }\n\n        const unsubsribe = ref.onSnapshot((snapshot) => {\n\n            let results = [];\n            snapshot.docs.forEach(doc => {\n                results.push({ ...doc.data(), id: doc.id });\n            })\n\n            // update state\n            setDocuments(results)\n            setError(null)\n        }, (error) => {\n            console.log(error)\n            setError('Could not fetch the data')\n        })\n\n        // unsubsribe on unmount\n        return () => unsubsribe();\n\n    }, [collection, query, orderBy])\n\n    return { documents, error }\n}\n\n","import { useState, useEffect } from 'react';\nimport { projectAuth } from \"../firebase/config\";\nimport { useAuthContext } from \"./useAuthContext\";\n\nexport const useLogin = () => {\n    const [isCancelled, setIsCancelled] = useState(false);\n    const [error, setError] = useState(null);\n    const [isPending, setIsPending] = useState(false);\n    const { dispatch } = useAuthContext();\n\n    const login = async (email, password) => {\n\n        setError(null)\n        setIsPending(true)\n\n        // sign the user in\n        try {\n            const res = await projectAuth.signInWithEmailAndPassword(email, password)\n\n            // dispatch action \n            dispatch({ type: 'LOGIN', payload: res.user })\n\n            // update state\n            if (!isCancelled) {\n                setError(null)\n                setIsPending(false)\n            }\n        }\n        catch (err) {\n            if (!isCancelled) {\n                console.log(err.message)\n                setError(err.message)\n                setIsPending(false)\n            }\n        }\n    }\n\n    // cleanup function stops async state change when component unmounts\n    useEffect(() => {\n        return () => setIsCancelled(true)\n    }, [])\n\n    return { login, error, isPending }\n}\n","// hooks\nimport { useState } from 'react'\nimport { useLogin } from '../../hooks/useLogin'\n\n// styles\nimport styles from './Login.module.css'\n\nimport React from 'react'\n\nexport default function Login() {\n\n    const { login, error, isPending } = useLogin();\n\n    const [email, setEmail] = useState(\"\")\n    const [password, setPassword] = useState(\"\")\n\n    const handleSubmit = (e) => {\n        e.preventDefault()\n\n        login(email, password);\n    }\n    return (\n        <form onSubmit={handleSubmit} className={styles['login-form']}>\n            <h2>Login</h2>\n            <label>\n                <span>email:</span>\n                <input\n                    type='email'\n                    onChange={(e) => setEmail(e.target.value)}\n                    value={email}\n                />\n            </label>\n            <label>\n                <span>password:</span>\n                <input\n                    type=\"password\"\n                    onChange={(e) => setPassword(e.target.value)}\n                    value={password}\n                />\n            </label>\n            {!isPending && <button className='btn'>Login</button>}\n            {isPending && <button className='btn' disabled>loading</button>}\n            {error && <p>{error}</p>}\n        </form>\n    )\n}\n","import { projectAuth } from '../firebase/config';\nimport { useState, useEffect } from 'react'\nimport { useAuthContext } from './useAuthContext';\n\nexport const useSignup = () => {\n\n  const [isCancelled, setIsCancelled] = useState(false);\n  const [error, setError] = useState('');\n  const [isPending, setIsPending] = useState(false)\n  const { dispatch } = useAuthContext();\n\n  const signup = async (email, password, displayName) => {\n\n    setError(null);\n    setIsPending(true);\n\n    try {\n      // signup user\n      const res = await projectAuth.createUserWithEmailAndPassword(email, password);\n\n      if (!res) {\n        throw new Error('could not complete signup')\n      }\n\n      // add display name to user \n      await res.user.updateProfile({ displayName: displayName })\n\n      // dispath login action\n      dispatch({ type: 'LOGIN', payload: res.user })\n\n      if (!isCancelled) {\n\n\n        setIsPending(false)\n        setError(null)\n      }\n    }\n    catch (err) {\n\n      if (!isCancelled) {\n        console.log(err.message)\n        setError(err.message)\n        setIsPending(false)\n      }\n    }\n\n  }\n\n  useEffect(() => {\n\n    return () => setIsCancelled(true);\n  }, [])\n\n  return { error, isPending, signup }\n}\n","// hooks \nimport { useState } from 'react'\nimport { useSignup } from '../../hooks/useSignup'\n// styles\nimport styles from './Signup.module.css'\n\nimport React from 'react'\n\n\nexport default function Signup() {\n\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [username, setUsername] = useState(\"\");\n    const { signup, isPending, error } = useSignup();\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n\n        signup(email, password, username);\n    }\n\n    return (\n        <form onSubmit={handleSubmit} className={styles['signup-form']}>\n            <h2>Signup</h2>\n            <label >\n                <span>email:</span>\n                <input\n                    type=\"email\"\n                    onChange={(e) => setEmail(e.target.value)}\n                    value={email}\n                />\n            </label>\n            <label>\n                <span>password:</span>\n                <input\n                    type=\"password\"\n                    onChange={(e) => setPassword(e.target.value)}\n                    value={password} />\n            </label>\n            <label>\n                <span>username</span>\n                <input\n                    type=\"text\"\n                    onChange={(e) => setUsername(e.target.value)}\n                    value={username} />\n            </label>\n\n            {!isPending && <button className='btn'>Signup</button>}\n            {isPending && <button className='btn' disabled>loading</button>}\n            {error && <p>{error}</p>}\n        </form>\n    )\n}\n","import { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom';\nimport { useAuthContext } from './hooks/useAuthContext';\nimport './App.css'\n\n\n// components\nimport Navbar from './components/Navbar';\nimport Home from './pages/home/Home';\nimport Login from './pages/login/Login';\nimport Signup from './pages/signup/Signup';\n\n\nfunction App() {\n\n  const { authIsReady, user } = useAuthContext();\n\n  return (\n\n    <div className=\"App\">\n      {authIsReady && (\n        <BrowserRouter>\n          <Navbar />\n          <Switch>\n            <Route exact path=\"/\">\n              {!user && <Redirect to=\"/login\" />}\n              {user && <Home />}\n            </Route>\n            <Route path=\"/login\">\n              {!user && <Login />}\n              {user && <Redirect to=\"/\" />}\n            </Route>\n            <Route path=\"/signup\">\n              {user && <Redirect to=\"/\" />}\n              {!user && <Signup />}\n            </Route>\n          </Switch>\n        </BrowserRouter>\n      )}\n    </div>\n  );\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { AuthContextProvider } from './context/AuthContext'\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthContextProvider>\n      <App />\n    </AuthContextProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}